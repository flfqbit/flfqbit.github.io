<!DOCTYPE html>
<html>
  <head lang="zh">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black" name="apple-mobile-web-app-status-bar-style"/>
<meta content="telephone=no" name="format-detection"/>
<meta name="renderer" content="webkit">
<meta name="description" content="记录区块链行业重点文章，前沿技术">
<meta http-equiv="Access-Control-Allow-Origin" content="*">

<title>[41]OP_RETURN参数阅读记录 | 飞来飞去-区块链学习笔记</title>
<link href="https://flfqbit.github.io/styles/main.css" type="text/css" rel="stylesheet"/>
<link rel="stylesheet" href="//cdn.bootcss.com/KaTeX/0.10.2/katex.min.css"/>
<script src="//cdn.bootcss.com/KaTeX/0.10.2/katex.min.js"></script>
<script src="//cdn.bootcss.com/KaTeX/0.10.2/contrib/auto-render.min.js"></script>
<script type="text/javascript" src="https://flfqbit.github.io/media/scripts/jquery.js"></script>
<script type="text/javascript" src="https://flfqbit.github.io/media/scripts/jquery.pjax.min.js"></script>
<script type="text/javascript" src="https://flfqbit.github.io/media/scripts/basic.js"></script>
<script type="text/javascript" src="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script async type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script type="text/javascript" src="https://cdn.bootcss.com/lightgallery/1.6.12/js/lightgallery.min.js"></script>
<script src="https://cdn.bootcss.com/tocbot/4.8.1/tocbot.js"></script>

  </head>
  <body>
     <div class="header">
      <div class="logo_title">
		  
        <div class="title animated fadeInDown"><img id="img1" alt="logo" style="display:inline-block;" src="https://flfqbit.github.io/images/avatar.png"/>
<script>
var r = 0;
    window.onload = function(){
        var current = 0;
        document.getElementById('img1').onclick = function(){
            current = (current+90)%360;
            this.style.transform = 'rotate('+current+'deg)';
        }
    };
</script>

          <h1 title="飞来飞去-区块链学习笔记" class="weaklink"><a  href="/">飞来飞去-区块链学习笔记</a>

          </h1>
	  

          <div class="navbar weaklink">
            <div class="normal_nav">

<div class="bitcron_nav_container">


  <div class="bitcron_nav">
    <div class="mixed_site_nav_wrap site_nav_wrap">
		
      <ul class="mixed_site_nav site_nav sm sm-base">
	  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >首页</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="https://flfqbit.github.io/tag/12QaTh0vp/" class="selected active current nav__item" >阅读随笔</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="https://flfqbit.github.io/tag/tkwMj61kn/" class="selected active current nav__item" >资料整理</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >归档</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >关于</a>
  </li>
  
 
 <li>

      </ul>
	  

      <div class="clear clear_nav_inline_end"></div>
    </div>

  </div>



  <div class="clear clear_nav_end"></div>

</div>

            </div>
			
			<div class="hamberger"><i class="fa fa-bars"></i>
<i class="fa fa-times"></i>

			</div>

          </div>

        </div>

      </div>

      <div class="hidden_nav animated fadeInDown">

<div class="bitcron_nav_container">


  <div class="bitcron_nav">
    <div class="mixed_site_nav_wrap site_nav_wrap">
      <ul class="mixed_site_nav site_nav sm sm-base">
	
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >首页</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="https://flfqbit.github.io/tag/12QaTh0vp/" class="selected active current nav__item" >阅读随笔</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="https://flfqbit.github.io/tag/tkwMj61kn/" class="selected active current nav__item" >资料整理</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >归档</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >关于</a>

  </li>




      </ul>

      <div class="clear clear_nav_inline_end"></div>
    </div>

  </div>



  <div class="clear clear_nav_end"></div>

</div>

      </div>

    </div>




    <div class="main" id="pjax-container">
      <div class="main-inner">
<div class="content">
<div class="post_page" >
<div class="post">
  <div class="post_title sm_margin">
    <h2><a>[41]OP_RETURN参数阅读记录</a>
    </h2>
  </div>
<script>
function lan(){
	if (document.getElementById("lan").innerText == "繁"){
		var s=document.getElementById("tongwenlet_cn");
		if(s != null){
		document.body.removeChild(s);
		}
		var s = document.createElement("script");
		s.language = "javascript";
		s.type = "text/javascript";
		s.src = "https://git.oschina.net/runningcheese/JiathisQR.js/raw/master/bookmarklet_tw.js";
		s.id = "tongwenlet_cn";
		document.body.appendChild(s);
		document.getElementById("lan").innerHTML = "简"
	}
	else if(document.getElementById("lan").innerText == "簡"){
		var s=document.getElementById("tongwenlet_cn");
		if(s != null){
		document.body.removeChild(s);
		}
		var s = document.createElement("script");
		s.language = "javascript";
		s.type = "text/javascript";
		s.src = "https://git.oschina.net/runningcheese/JiathisQR.js/raw/master/bookmarklet_cn.js";
		s.id = "tongwenlet_cn";
		document.body.appendChild(s);
		document.getElementById("lan").innerHTML = "繁"
		}
}

function change(){	
    var rand = Math.random()*1+1;
    var num = window.getComputedStyle(document.getElementsByName("show")[0],undefined).fontSize;
	num = num.slice(0,-2); 
    document.getElementById("show").style.fontSize = num - rand +'px';
}
</script>
  <div class="post_details">
    <div class="info"><i class="fa fa-calendar"></i>
<span class="date_info">2020-02-22</span>
<i class="fa fa-eye"></i>
<span class="date_info"><span id="busuanzi_value_page_pv"></span> Views</span>
<i class="fa fa-bookmark-o"></i>
<span class="tags_info weaklink">
	
	<a href="https://flfqbit.github.io/tag/12QaTh0vp/" class="tag">阅读随笔</a>

</span>
<i class="fa fa-anchor"></i>
<span style="margin-right:15px">
1236字
</span>
<i class="fa fa-clock-o"></i>
<span style="margin-right:15px">
6 min read
</span>
<span style="margin-right:15px">
</span>
<span style="margin-right:15px">
</span>
<span style="margin-right:15px">
<a id="lan" href="javascript:void(0);" onclick="lan();" title="调整简繁体">繁</a>
</span>
</div>
  </div>

    <div class="post_content markdown">
	

	
    <div name="show" id="show">
	<p class="md_block"><span class="md_line md_line_start md_line_end"><h1 id="opreturn参数的发展历史和未来展望">opreturn参数的发展历史和未来展望</h1>
<p>https://bitzuma.com/posts/op-return-and-the-future-of-bitcoin/<br>
描述了opreturn参数的发展历史和未来展望</p>
<blockquote>
<p>Validation scripts offer an obvious method for encoding application-specific data, but other techniques have been used. For example,?one scheme?stored data by writing it into two payment addresses.<br>
历史上曾经有提议，将数据存储在地址中</p>
</blockquote>
<blockquote>
<p>A more serious concern stems from the need to keep application-specific data within the unspent transaction output (UTXO) set. The UTXO set contains references to all spendable coins, and so should be kept small to ensure fast transaction validation. Embedding application data into addresses or challenge scripts forces each full node to add a reference to the UTXO set.<br>
UTXO数据集需要尽量小，以便提高交易验证效率。<br>
将数据内嵌在地址或脚本中，将使得所有全节点维护的UTXO数据集中增加引用数量。<br>
这句话的核心是，将数据存储在地址和签名中的行为，有可能使这笔交易成为不可执行的交易，即永久性增加UTXO的数据，这将对整个系统的验证效率产生潜在威胁。</p>
</blockquote>
<h1 id="比特币脚本介绍-1">比特币脚本介绍 1</h1>
<p>https://davidederosa.com/basic-blockchain-programming/scripts-in-transaction-processing/<br>
介绍比特币的脚本</p>
<blockquote>
<p>Although stored in the block chain,?OP_RETURN?bytes are excluded from the UTXO set, conserving a scarce resource. As a side effect, an output using an?OP_RETURN?challenge script becomes unspendable. For this reason, the value of an?OP_RETURN?output is usually set to 0.</p>
</blockquote>
<p>UTXO (unspent transaction output)数据集被矿工维护，以便能够快速验证交易合法性，防止双花现象。<br>
OP_RETURN不属于UTXO数据集。<br>
OP_RETURN脚本存储在一个output中，金额为0。</p>
<blockquote>
<p>However, a 40 byte sequence more than suffices to encode an identifier such as a hash value. This value can uniquely represent any digital document, from an image, to a poem, to an abstract data structure. Embedded hash values in turn offer a method to link the block chain to other data stores such as?distributed hash tables.<br>
40字节足够存储1个哈希值。这个哈希值可以唯一代表任意一个数字文件，从图片到文字到数据结构。<br>
内嵌的哈希值可以将区块链连接到任意存储文件。</p>
</blockquote>
<blockquote>
<p>The Bitcoin Core 0.9.0 release notes?attempted to clarify the purpose of?OP_RETURN:</p>
</blockquote>
<p>0.9.0版本正式定义了op_return参数</p>
<h1 id="比特币脚本介绍-2">比特币脚本介绍 2</h1>
<p>https://bitzuma.com/posts/op-return-and-the-future-of-bitcoin/<br>
这篇文章介绍op_return很详细。</p>
<h1 id="比特币脚本介绍-3">比特币脚本介绍 3</h1>
<p>https://bitcoin.org/en/release/v0.12.0#relay-any-sequence-of-pushdatas-in-opreturn-outputs-now-allowed</p>
<blockquote>
<p>Relay: Any sequence of pushdatas in OP_RETURN outputs now allowed<br>
Previously OP_RETURN outputs with a payload were only relayed and mined if they had a single pushdata. This restriction has been lifted to allow any combination of data pushes and numeric constant opcodes (OP_1 to OP_16) after the OP_RETURN. The limit on OP_RETURN output size is now applied to the entire serialized scriptPubKey, 83 bytes by default. (the previous 80 byte default plus three bytes overhead)</p>
</blockquote>
<ul>
<li>默认长度是83字节</li>
<li>比特币协议V0.12.0，去除了长度限制，目前op_return长度的上限是scriptPubKey的长度限制？</li>
</ul>
<h1 id="比特币op_return格式说明">比特币op_return格式说明</h1>
<p>长度上限83B，前3个字节为固定参数（前2个字节为标志，第3个字节存储），后面的为自定义内容。<br>
固定格式：</p>
<ul>
<li>6a 4c <a href="%5B80/255%5D">50/ff</a>  xxxx</li>
<li>“6a 4c”是固定标注，</li>
<li>第3个字节存储自定义内容的长度</li>
<li>50是16进制，代表十进制80，表示自定义内容的长度是80</li>
<li>op_return自定义内容的长度是由用户自行定义，根据“op_return数据统计网站-长度统计”，长度为20和80 的比例最高</li>
<li>可疑的情况是，在testnet中，第3个字节可以设置为ff，代表十进制255，实验测试可以存储超过80 的数据。</li>
<li>[op_return数据统计网站-长度统计]https://opreturn.org/op-return-sizes/</li>
<li>[长度为255的交易testnet]https://live.blockcypher.com/btc-testnet/tx/1da4803e97df8aa21f117eab735b76111537c5a04db6549b627ddbfd6561f2f1/#</li>
</ul>
<p>op_return自定义内容的特征</p>
<ul>
<li>前3个字节有一定规律，有“op_return数据统计网站-protocls”专门统计分类情况。有两类情况占主要比例。</li>
<li>[op_return数据统计网站-protocls]https://opreturn.org/op-return-protocols/</li>
</ul>
<p>op_return参数在输出脚本中的比例</p>
<ul>
<li>从“op_return数据统计网站-脚本比例”上的数据，可以看出op_return的比例远小于1%，与我原来印象10%，差距巨大。需要调研此问题。</li>
<li>[op_return数据统计网站-脚本比例]https://btc.com/stats/script?time_range=all&amp;latest_block=620227&amp;static_type=amount_stats</li>
</ul>
<h1 id="比特币op_return参数数据统计网站1">比特币op_return参数数据统计网站1</h1>
<p>http://coinsecrets.org/<br>
这个网站专门记录比特币op_return参数中存储的数据。<br>
http://api.coinsecrets.org/block/353197?where?353197?is a bitcoin block number.<br>
这个网站提供的API参数可以查看每个区块中存储的opreturn数据。</p>
<h1 id="比特币op_return参数数据统计网站2">比特币op_return参数数据统计网站2</h1>
<p>https://opreturn.org/<br>
此网站提供8种数据，包括每月数据，协议，大小，脚本类型、隔离见证等，值得深入研究。</p>
<hr>
<p>-更新时间：20200305<br>
-更新内容：补充了统计网站，介绍3等内容，完善格式。<br>
-下一步要补充op_return参数在各次协议升级中的变化</p>
<p>-更新时间：20190807<br>
-更新内容：原始文章</p>
</span></p></div><div id = "warn"></div>
	<br>
	<hr>
<div style="color: #ccc;font-size:14px;"><i class="fa fa-user"></i>本文由<a rel="license" href="/">飞来飞去-区块链学习笔记</a>创作</div>	
<div style="color: #ccc;font-size:14px;"><i class="fa fa-cc"></i>该文章采用<a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可。转载请注明出处！</div>
<div style="color: #ccc;font-size:14px;"><i class="fa fa-clock-o"></i>发布时间为：2020-02-22</div>    
</div>
</div>

<style type="text/css">
#mememe {
	border:3px;
	border-radius:5px;
    background-repeat: no-repeat;
    height: 100%;
	width: 100%;
	display: inline-block;
	border-radius:5px; 
}
</style>

<div style="width:100%;overflow:hidden">

          <div style="float:right;text-align:right;color:#ccc;font-size:18px;width:50%;">
            下一篇
            <a href="https://flfqbit.github.io/post/40yi-ge-cheng-gong-de-qu-kuai-lian-chuang-ye-gong-si-an-li-chainsecurity/">
              <p class="post-title">
                <b>[40]一个成功的区块链创业公司案例-chainsecurity</b>
              </p>
            </a>
          </div>



          <div style="float:left;text-align:left;color:#ccc;font-size:18px;width:50%;">
            上一篇
            <a href="https://flfqbit.github.io/post/42ma-yi-jin-fu-qu-kuai-lian-jing-sai-huo-dong-su-ji/">
              <p class="post-title">
                <b>[42]蚂蚁金服区块链竞赛活动速记</b>
              </p>
            </a>
          </div>

</div>

<div class="doc_comments">

          
			<div id="gitalk-container"></div>
            <link href="https://cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css" rel="stylesheet">
<script>
  var gitalk = new Gitalk({
    clientID: '0ac1a4e5b9459ff911f2',
    clientSecret: 'e30abb85f53e52321e943390daa3bac6008f1877',
    repo: 'flfqbit.github.io',
    owner: 'flfqbit',
    admin: ['flfqbit'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })
  gitalk.render('gitalk-container')
</script>


          
			  
          
        
</div>
<script>
var link="";$("img").each((i,o)=>{var o=$(o);if(o.attr("src").indexOf("sinaimg")>0||o.attr("src").indexOf("qpic")>0||o.attr("src").indexOf("baidu")>0||o.attr("src").indexOf("sinaimg")>0){o.attr("referrerpolicy","no-referrer");link=o.attr("src");o.attr("src",link);}});
imgList = document.querySelectorAll('.md_block img')
imgList.forEach(img => {
  if (img.alt !== "logo" && img.alt !== "featureimg"){
  let div1 = document.createElement('div')
  let div = document.createElement('div')
  div.className='back';
  div.setAttribute("data-src",img.src)
  var figuration = document.createElement("figcaption")
  figuration.innerHTML = '<a href="' + img.src + '">' + img.alt + '</a>'
  img.replaceWith(div1)
  div1.appendChild(div)
  div.appendChild(img)
  div1.appendChild(figuration)}
})
$('img').on('error',function(){$(this).prop('src','https://flfqbit.github.io/media/images/broken.jpg')});$(".md_block a").attr("rel","external nofollow");$("a[rel='external nofollow']").attr("target","_blank");$("a[href^='#']").removeAttr("target");$("a.ex").removeAttr("rel");$("a.ex").removeAttr("target");
content="<div class='warn'>本文最后更新于2020-02-22，已超过 1 年没有更新，涉及的内容可能已经失效！</div>";var date1="2020-02-22 23:46:47";date1=date1.replace("-","/");var date2=new Date();var date3=date2.getTime()-new Date(date1).getTime();var days=Math.floor(date3/(24*3600*1000));if(days>=365){document.getElementById("warn").innerHTML=content};
$('#pjax-container').lightGallery({
    selector: '.back'
});
</script>
  </div>
</div>


      </div>
<div class="toc">
<ul class="markdownIt-TOC">
<li><a href="#opreturn%E5%8F%82%E6%95%B0%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2%E5%92%8C%E6%9C%AA%E6%9D%A5%E5%B1%95%E6%9C%9B">opreturn参数的发展历史和未来展望</a></li>
<li><a href="#%E6%AF%94%E7%89%B9%E5%B8%81%E8%84%9A%E6%9C%AC%E4%BB%8B%E7%BB%8D-1">比特币脚本介绍 1</a></li>
<li><a href="#%E6%AF%94%E7%89%B9%E5%B8%81%E8%84%9A%E6%9C%AC%E4%BB%8B%E7%BB%8D-2">比特币脚本介绍 2</a></li>
<li><a href="#%E6%AF%94%E7%89%B9%E5%B8%81%E8%84%9A%E6%9C%AC%E4%BB%8B%E7%BB%8D-3">比特币脚本介绍 3</a></li>
<li><a href="#%E6%AF%94%E7%89%B9%E5%B8%81op_return%E6%A0%BC%E5%BC%8F%E8%AF%B4%E6%98%8E">比特币op_return格式说明</a></li>
<li><a href="#%E6%AF%94%E7%89%B9%E5%B8%81op_return%E5%8F%82%E6%95%B0%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%E7%BD%91%E7%AB%991">比特币op_return参数数据统计网站1</a></li>
<li><a href="#%E6%AF%94%E7%89%B9%E5%B8%81op_return%E5%8F%82%E6%95%B0%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%E7%BD%91%E7%AB%992">比特币op_return参数数据统计网站2</a></li>
</ul>

</div>
    </div>
	
   <div class="footer">
<div class="site_footer_wrap"><div class="site_footer">

      <div class="mysocials"><div class="my_socials">
		   
			   
    
			   
    
			   
    
			   
<a href="https://github.com/flfqbit" title="github"><i class="fa fa-github"></i></a>

    
			   
<a href="fenghao2821@gmail.com" title="envelope"><i class="fa fa-envelope"></i></a>

    
			   
    
</div>
      </div>

      <div class="copyright" id="copyright">
	  <script>
		var date=new Date;
		var year=date.getFullYear(); 
		document.write("Copyright © "+year+" " + "飞来飞去-区块链学习笔记");
		</script>
		
		
	  
      </div>

    </div>

<script>
new Darkmode({label: '🌓',backgroundColor: '#f7f7f7',time: '0.5s'}).showWidget();
console.clear();
console.log("\n %c \u26a1Theme: Bitcron-pro Author's Blog:https://blog.blinkstar.cn  Writen By Serence  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;", );
</script>
<script>
hljs.initHighlightingOnLoad();
</script>


</body>

</html>
